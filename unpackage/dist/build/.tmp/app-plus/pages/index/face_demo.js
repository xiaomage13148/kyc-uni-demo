(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/face_demo"],{"2a9d":function(e,t,i){"use strict";i.r(t);var n=i("cf35"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=a.a},"4cdb":function(e,t,i){"use strict";var n,a=function(){var e=this,t=e.$createElement;e._self._c},o=[];i.d(t,"b",function(){return a}),i.d(t,"c",function(){return o}),i.d(t,"a",function(){return n})},"7e5c":function(e,t,i){"use strict";i.r(t);var n=i("4cdb"),a=i("2a9d");for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);var s,r=i("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=c.exports},b65f:function(e,t,i){"use strict";(function(e){i("5837"),i("921b");n(i("66fd"));var t=n(i("7e5c"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},cf35:function(e,t,i){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("52d7"),o=e.requireNativePlugin("DC-WBFaceService"),s={data:function(){return{usernameInput:"",useridInput:"",appid:"TIDA0001",userId:(0,a.randomString)(8),orderNo:(0,a.randomString)(9),nonce:(0,a.randomString)(32),version:"1.0.0",licence:"qRi1R4K7QkHvqBGvikKL8tr4skQ/jbMw2T4M9GrBzh0A8YQ+/UHTrfst4R9efX8GwwqmGGYgnUH8LWjdgvbc5BgXmNOvFSV/QJAXoGP9WnnvKOE1DbzmK7n+rodqNXrEhxdBsSBvagKBjlOjz4dw8jlt0ZjF+zyLGTmm5kfqh9KLIexD9WJzKozJgXLwt/bg7WIctrkWcb/HDn11tHr6Fn547pIaCBaICky+HpZoFRAcDlRo3mcFtFY2Uysw/Eh0eJway+b0A2mM9qZ4xZN759iRg/38restZAkh8q8nKm2hzkiLSbApvzMh18pD9YGXVY2nKBhb0Z7ci8/1dr4Yyg=="}},methods:{startLightLiveCheckAndCompareWithIdImgService:function(){n("log","【uni log】CLICK ================> 光线活体-身份证对比"," at pages\\index\\face_demo.vue:56"),0!=this.usernameInput.length?0!=this.useridInput.length?this.getSign(1,0):e.showToast({icon:"none",title:"用户身份证号不能为空"}):e.showToast({icon:"none",title:"用户姓名不能为空"})},startActLiveCheckAndCompareWithIdImgService:function(){n("log","【uni log】CLICK ================> 动作活体-身份证对比"," at pages\\index\\face_demo.vue:74"),0!=this.usernameInput.length?0!=this.useridInput.length?this.getSign(0,0):e.showToast({icon:"none",title:"用户身份证号不能为空"}):e.showToast({icon:"none",title:"用户姓名不能为空"})},startLightLiveCheckAndCompareWithScrImgService:function(){n("log","【uni log】CLICK ================> 光线活体-自带对比源"," at pages\\index\\face_demo.vue:92"),0!=this.usernameInput.length?0!=this.useridInput.length?this.getSign(1,1):e.showToast({icon:"none",title:"用户身份证号不能为空"}):e.showToast({icon:"none",title:"用户姓名不能为空"})},startActLiveCheckAndCompareWithScrImgService:function(){n("log","【uni log】CLICK ================> 动作活体-自带对比源"," at pages\\index\\face_demo.vue:110"),0!=this.usernameInput.length?0!=this.useridInput.length?this.getSign(0,1):e.showToast({icon:"none",title:"用户身份证号不能为空"}):e.showToast({icon:"none",title:"用户姓名不能为空"})},startLightLiveCheckService:function(){n("log","【uni log】CLICK ================> 光线活体-仅活体检测"," at pages\\index\\face_demo.vue:128"),this.getSign(1,2)},startActLiveCheckService:function(){n("log","【uni log】CLICK ================> 动作活体-仅活体检测"," at pages\\index\\face_demo.vue:132"),this.getSign(0,2)},getSign:function(t,i){var a=this;n("log","【uni log】METHOD ================> getSign:faceType="+t+",compareType="+i+"."," at pages\\index\\face_demo.vue:137"),e.request({method:"GET",url:"https://ida.webank.com/ems-partner/cert/signature",data:{appid:this.appid,nonce:this.nonce,userid:this.userId},success:function(e){var o=e.data.sign;n("log","【uni log】getSignSuccess sign="+o," at pages\\index\\face_demo.vue:148"),2==i?a.startWbFaceVerifyService(o,"",t,2):a.getFaceId(o,t,i)}})},getFaceId:function(t,i,a){var o=this;n("log","【uni log】METHOD ================> getFaceId:sign="+t+", faceType="+i+",compareType="+a," at pages\\index\\face_demo.vue:162"),n("log","【uni log】this.usernameInput="+this.usernameInput+", this.useridInput="+this.useridInput," at pages\\index\\face_demo.vue:165");var s="",r="";if(1==a)return s="此处需要塞入对比源图片的base64 string",r="此处需要塞入对比类型",void e.showToast({icon:"none",title:"demo不能演示自带对比源，请在demo源码里塞入自带对比源需要数据后再测试~"});e.request({method:"POST",url:"https://idasc.webank.com/api/server/getfaceid",data:{webankAppId:this.appid,orderNo:this.orderNo,name:this.usernameInput,idNo:this.useridInput,userId:this.userId,srcPhotoSrc:s,srcPhotoType:r,version:this.version,sign:t,nonce:this.nonce},success:function(e){n("log","data:"+JSON.stringify(e.data)," at pages\\index\\face_demo.vue:200");var s=e.data.result;n("log","result:"+JSON.stringify(e.data.result)," at pages\\index\\face_demo.vue:202");var r=s.faceId;n("log","startFaceVerify: faceid="+r," at pages\\index\\face_demo.vue:204"),o.startWbFaceVerifyService(t,r,i,a)}})},startWbFaceVerifyService:function(t,i,a,s){n("log","【uni log】================> 拉起 face SDK！"," at pages\\index\\face_demo.vue:217"),o.startWbFaceVerifyService({apiVersion:"1.0.0",appId:this.appid,nonce:this.nonce,userId:this.userId,sign:t,orderNo:this.orderNo,licence:this.licence,faceId:i,faceType:a.toString(),compareType:s.toString(),sdkConfig:{showSuccessPage:!0,showFailurePage:!0,recordVideo:!1,playVoice:!0,detectCloseEyes:!1,theme:"0",isEnableLog:!0,windowLevel:"1",manualCookie:!0}},function(t){n("log","【uni log】face SDK callback ================> result."," at pages\\index\\face_demo.vue:247");var i=t.scene;if("wb_face_callback_login_failure"==i){var a=t.res,o=a.error,s="登录失败:domain="+o.domain+",code="+o.code+",desc="+o.desc+",reason="+o.reason;return n("log",s," at pages\\index\\face_demo.vue:256"),void e.showToast({icon:"none",title:s})}if("wb_face_callback_verify_result"==i){var r=t.res,c=r.success;if(c)n("log","刷脸成功:liverate="+r.liveRate+",similarity="+r.similarity," at pages\\index\\face_demo.vue:272"),e.showToast({icon:"none",title:"刷脸成功:liverate="+r.liveRate+",similarity="+r.similarity});else{var u=r.error;n("log","error="+JSON.stringify(u)," at pages\\index\\face_demo.vue:280");var d=u.domain;if("WBFaceErrorDomainCompareServer"==d)return n("log","对比失败，liveRate="+r.liveRate+"; similarity="+r.similarity+";sign="+r.sign," at pages\\index\\face_demo.vue:286"),void e.showToast({icon:"none",title:"对比失败，liveRate="+r.liveRate+"; similarity="+r.similarity+";sign="+r.sign});e.showToast({icon:"none",title:JSON.stringify(u)})}}})}}};t.default=s}).call(this,i("6e42")["default"],i("0de9")["default"])}},[["b65f","common/runtime","common/vendor"]]]);